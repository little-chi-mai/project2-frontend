(this["webpackJsonpproject2-frontend"]=this["webpackJsonpproject2-frontend"]||[]).push([[0],{51:function(t,e,n){},52:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n.n(a),r=n(24),i=n.n(r),c=(n(51),n(52),n(3)),o=n(7),d=n(8),u=n(10),l=n(9),h=n(4),j=n.n(h),b=n(14),p=n(11),O=n(20),v=n(46),g=n(0),f=function(t){return Object(g.jsxs)(O.a,{sticky:"top",bg:"dark",variant:"dark",children:[Object(g.jsx)(O.a.Brand,{children:Object(g.jsxs)(b.b,{to:"/",children:[Object(g.jsx)(v.a,{})," Home"]})}),t.isLoggedIn&&Object(g.jsxs)("span",{children:[Object(g.jsx)(O.a.Brand,{children:Object(g.jsx)(b.b,{to:"/wishlist",children:"Your List"})}),Object(g.jsx)(O.a.Brand,{children:Object(g.jsx)(b.b,{to:"/events",children:"Your Events"})}),t.user&&Object(g.jsx)(O.a.Brand,{children:Object(g.jsxs)(b.b,{to:"/logout",children:["Log Out ",t.user.name]})})]}),!t.isLoggedIn&&Object(g.jsxs)("span",{children:[Object(g.jsx)(O.a.Brand,{children:Object(g.jsx)(b.b,{to:"/login",children:"Log In"})}),Object(g.jsx)(O.a.Brand,{children:Object(g.jsx)(b.b,{to:"/signup",children:"Sign Up"})})]})]})},x=n(22),m={SERVER_URL:"http://localhost:3000"},_=m.SERVER_URL+"/login",S=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).handleChange=function(t){var e=t.target,n=e.name,s=e.value;a.setState(Object(x.a)({},n,s))},a.handleSubmit=function(t){t.preventDefault();var e=a.state,n={name:e.name,password:e.password};j.a.post(_,{user:n},{withCredentials:!0}).then((function(t){t.data.logged_in?(a.props.handleLogin(t.data.user),a.redirect()):a.setState({errors:t.data.errors})})).catch((function(t){return console.log("api errors:",t)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("ul",{children:a.state.errors.map((function(t){return Object(g.jsx)("li",{children:t},t)}))})})},a.state={name:"",password:"",errors:""},a}return Object(d.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=(t.email,t.password);return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Log In"}),Object(g.jsx)("p",{children:this.state.errors}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("input",{placeholder:"name",type:"text",name:"name",value:e,onChange:this.handleChange}),Object(g.jsx)("input",{placeholder:"password",type:"password",name:"password",value:n,onChange:this.handleChange}),Object(g.jsx)("button",{placeholder:"submit",type:"submit",children:"Log In"}),Object(g.jsxs)("div",{children:["or ",Object(g.jsx)(b.b,{to:"/signup",children:"sign up"})]})]})]})}}]),n}(a.Component),y=m.SERVER_URL+"/users",C=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).handleChange=function(t){var e=t.target,n=e.name,s=e.value;a.setState(Object(x.a)({},n,s))},a.handleSubmit=function(t){t.preventDefault();var e=a.state,n={name:e.name,email:e.email,password:e.password,password_confirmation:e.password_confirmation};j.a.post(y,{user:n},{withCredentials:!0}).then((function(t){console.log(n),console.log(t),"created"===t.data.status?(a.props.handleLogin(t.data.user),a.redirect()):(console.log(t.data.errors),a.setState({errors:t.data.errors}))})).catch((function(t){return console.log("api errors:",t)}))},a.handleErrors=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("ul",{children:a.state.errors.map((function(t){return Object(g.jsx)("li",{children:t},t)}))})})},a.state={name:"",email:"",password:"",password_confirmation:"",errors:[]},a}return Object(d.a)(n,[{key:"redirect",value:function(){console.log("REDIRECT AFTER SIGNUP"),this.props.history.push("/")}},{key:"render",value:function(){var t=this.state,e=t.name,n=t.email,a=t.password,s=t.password_confirmation;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Sign Up"}),this.handleErrors(),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("input",{placeholder:"name",type:"text",name:"name",value:e,onChange:this.handleChange}),Object(g.jsx)("input",{placeholder:"email",type:"email",name:"email",value:n,onChange:this.handleChange}),Object(g.jsx)("input",{placeholder:"password",type:"password",name:"password",value:a,onChange:this.handleChange}),Object(g.jsx)("input",{placeholder:"password confirmation",type:"password",name:"password_confirmation",value:s,onChange:this.handleChange}),Object(g.jsx)("button",{placeholder:"submit",type:"submit",children:"Sign Up"})]})]})}}]),n}(a.Component),R=m.SERVER_URL+"/restaurants.json";a.Component;var k=function(t){return Object(g.jsx)("button",{children:Object(g.jsx)(b.b,{to:"/restaurant/"+t.restaurant.id+"/create-event",children:"Create Event"})})},E=m.SERVER_URL,L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;Object(o.a)(this,n),(a=e.call(this,t)).state={restaurant:{}};var s,r=(s=t.match.params.id,E+"restaurants/".concat(s));return j.a.get(r).then((function(t){a.setState({restaurant:t.data.restaurants})})),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:this.state.restaurant.name}),Object(g.jsxs)("p",{children:["Address: ",this.state.restaurant.address]}),this.state.restaurant.website&&Object(g.jsxs)("p",{children:["Website: ",Object(g.jsx)("a",{href:this.state.restaurant.website,children:this.state.restaurant.website})]}),this.state.restaurant.contact&&Object(g.jsxs)("p",{children:["Contact: ",this.state.restaurant.contact]}),this.state.restaurant.rating&&Object(g.jsxs)("p",{children:["Rating: ",this.state.restaurant.rating,"/5"]}),this.state.restaurant.price_level&&Object(g.jsxs)("p",{children:["Price level: ",this.state.restaurant.price_level,"/5"]}),Object(g.jsx)(k,{restaurant:this.state.restaurant})]})}}]),n}(a.Component),I=n(6),w=function(t){return Object(g.jsx)("div",{children:t.chats.map((function(t){return Object(g.jsxs)("p",{children:[t.user.name," said: ",t.content]},t.id)}))})},A=m.SERVER_URL+"/chats.json",D=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={id:a.props.event_id,chats:[]},a.fetchChats=a.fetchChats.bind(Object(I.a)(a)),a}return Object(d.a)(n,[{key:"fetchChats",value:function(){var t=this;j.a.get(A).then((function(e){var n=e.data.filter((function(e){return e.event&&e.event.id===t.state.id}));t.setState({chats:n}),setTimeout(t.fetchChats,4e3)}))}},{key:"componentDidMount",value:function(){this.fetchChats()}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"Chatbox"}),Object(g.jsx)(w,{chats:this.state.chats})]})}}]),n}(a.Component),T=m.SERVER_URL+"/chats",U=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t))._handleSubmit=function(t){t.preventDefault(),a.setState({content:""}),j.a.post(T,{user_id:a.props.user.id,event_id:a.props.event_id,content:a.state.content}).then((function(t){console.log(t)}),(function(t){console.log("CreateChat error",t)}))},a.state={content:""},a._handleChange=a._handleChange.bind(Object(I.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(I.a)(a)),a}return Object(d.a)(n,[{key:"_handleChange",value:function(t){this.setState({content:t.target.value})}},{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:this._handleSubmit,children:[Object(g.jsx)("textarea",{name:"",id:"",cols:"40",rows:"5",onChange:this._handleChange,value:this.state.content}),Object(g.jsx)("input",{type:"submit",value:"Post"})]})})}}]),n}(a.Component),V=m.SERVER_URL,N=function(t){return V+"/events/".concat(t,".json")},B=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t))._handleToggle=function(t){t.preventDefault(),a.setState({edit:!a.state.edit})},a._handleEdit=function(t){t.preventDefault();var e={title:t.target.title.value,date:t.target.date.value,introduction:t.target.introduction.value},n=N(a.state.id);j.a.put(n,e).then((function(t){})),a.setState({edit:!1,title:e.title,date:e.date,introduction:e.introduction})},a.state={edit:!1,id:a.props.event_id,event:{}},a._handleToggle=a._handleToggle.bind(Object(I.a)(a)),a._handleEdit=a._handleEdit.bind(Object(I.a)(a)),a._handleDelete=a._handleDelete.bind(Object(I.a)(a)),a.renderRecord=a.renderRecord.bind(Object(I.a)(a)),a.renderForm=a.renderForm.bind(Object(I.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.fetchEvent()}},{key:"fetchEvent",value:function(){var t=this,e=N(this.props.event_id);j.a.get(e).then((function(e){var n=e.data.event;console.log("event",n),t.setState({event:n})}))}},{key:"_handleDelete",value:function(){var t=this,e=N(this.state.id);j.a.delete(e,{params:{id:this.state.id}}).then((function(e){console.log(e),t.props.history.push("/events")}))}},{key:"renderRecord",value:function(){var t=this.state.event,e=t.title,n=t.user,a=t.restaurant,s=t.date,r=t.attendants,i=t.introduction;if(console.log("this.state.event",this.state.event),this.state.event)return Object(g.jsxs)("div",{children:[Object(g.jsx)("h5",{children:e}),n&&Object(g.jsxs)("h3",{children:[" Creator: ",n.name," "]}),Object(g.jsxs)("h3",{children:["Date: ",s]}),a&&Object(g.jsxs)("h3",{children:["Venue: ",a.name]}),r&&Object(g.jsxs)("h4",{children:["Attendants:",r.map((function(t){return t.user.name})).join(", ")]}),i&&Object(g.jsxs)("p",{children:["Summary: ",i]}),Object(g.jsx)("button",{onClick:this._handleToggle,children:" Edit this event"}),Object(g.jsx)("button",{onClick:this._handleDelete,children:" Delete this event"}),Object(g.jsx)(D,{event_id:this.state.id}),Object(g.jsx)(U,Object(c.a)(Object(c.a)({},this.props),{},{event_id:this.state.id}))]})}},{key:"findAttendants",value:function(t,e){return e.filter((function(e){var n=new RegExp(t,"gi");return e.name.match(n)}))}},{key:"renderForm",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Edit Event"}),this.state.restaurant&&Object(g.jsxs)("h3",{children:["Venue:",this.state.restaurant.name]}),Object(g.jsxs)("form",{onSubmit:this._handleEdit,children:[Object(g.jsx)("label",{children:"Title"}),Object(g.jsx)("input",{name:"title",defaultValue:this.state.title,required:!0}),Object(g.jsx)("label",{children:"Date"}),Object(g.jsx)("input",{placeholder:"2020-12-31",type:"date",name:"date",defaultValue:this.state.date,required:!0}),Object(g.jsx)("label",{children:"Summary"}),Object(g.jsx)("textarea",{name:"introduction",defaultValue:this.state.introduction}),Object(g.jsx)("button",{children:"Update"})]})]})}},{key:"render",value:function(){return console.log("RENDER"),this.state.edit?this.renderForm():this.renderRecord()}}]),n}(a.Component),M=function(t){var e=Object(p.f)().id;return Object(g.jsx)(B,Object(c.a)(Object(c.a)({},t),{},{event_id:parseInt(e)}))},F=n(25),q=m.SERVER_URL,P=q+"/events",H=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).getRestaurantInfo=function(t){j.a.get(q+"/restaurants/".concat(t,".json")).then((function(t){a.setState({restaurant:t.data.restaurants})}))},a._handleChange=function(t){var e=t.target,n=e.name,s=e.value;a.setState(Object(x.a)({},n,s))},a._handleSubmit=function(t){console.log("HANDLESUBMIT"),t.preventDefault();var e=a.state,n=e.title,s=e.date,r=e.introduction,i=e.user_id,c=e.restaurant_id,o=e.attendants,d=(e._,{title:n,date:s,introduction:r,user_id:i,restaurant_id:c});console.log(d),j.a.post(P,d).then((function(t){console.log(t),a.addAttendants(o,d),a.props.history.push("/events")}))},a._findAttendants=function(t){if(t.preventDefault(),""!==t.target.value){var e=t.target.value;j.a.get(q+"/users").then((function(t){var n=t.data.users.filter((function(t){var n=new RegExp(e,"gi");return t.name.match(n)}));console.log("matches",n),a.setState({attendants_search:n})}))}else a.setState({attendants_search:[]})},a._handleCheckbox=function(t){t.preventDefault();var e=Object(F.a)(a.state.attendants_search),n=Object(F.a)(a.state.attendants),s=Number(t.target.id);if(!0===t.target.checked){var r=e.find((function(t){return t.id===s}));n=n.concat(r),a.setState({attendants:n})}else{var i=n.findIndex((function(t){return t.id===s}));-1!==i&&(n.splice(i,1),a.setState({attendants:n}))}},a.state={title:"",date:"",introduction:"",user_id:a.props.user.id,attendants:[],attendants_search:[],restaurant_id:a.props.restaurant_id,restaurant:{}},a._handleChange=a._handleChange.bind(Object(I.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(I.a)(a)),a._findAttendants=a._findAttendants.bind(Object(I.a)(a)),a._handleCheckbox=a._handleCheckbox.bind(Object(I.a)(a)),a._handleClickCheckBox=a._handleClickCheckBox.bind(Object(I.a)(a)),console.log(a.props.user.id),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getRestaurantInfo(this.state.restaurant_id)}},{key:"addAttendants",value:function(t,e){j.a.get(P+".json").then((function(n){console.log(n.data);var a=n.data.find((function(t){return t.title===e.title}));console.log(a),t.map((function(t){var e={user_id:t.id,event_id:a.id};console.log(e),j.a.post(q+"/attendants.json",e).then((function(t){console.log(t)})).catch((function(t){return console.log("ERROR",t)}))}))}))}},{key:"_handleClickCheckBox",value:function(){var t=this;console.log("CLICKED");var e=this.state.attendants_search.filter((function(e){return t.state.attendants.includes(e.id)}));console.log("matchesWithoutAttendants",e),this.setState({attendants_search:e})}},{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Create Event"}),Object(g.jsxs)("h3",{children:["Venue: ",this.state.restaurant.name]}),Object(g.jsx)("p",{children:this.state.restaurant.address}),Object(g.jsxs)("form",{onSubmit:this._handleSubmit,children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{children:"Title"}),Object(g.jsx)("input",{name:"title",onChange:this._handleChange,required:!0})]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{children:"Date"}),Object(g.jsx)("input",{placeholder:"2020-12-31",name:"date",type:"date",onChange:this._handleChange,required:!0})]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("label",{children:"Summary"}),Object(g.jsx)("textarea",{name:"introduction",onChange:this._handleChange})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Attendants"}),Object(g.jsx)("input",{name:"attendants",onChange:this._findAttendants}),Object(g.jsxs)("select",{name:"cars",id:"cars",children:[Object(g.jsx)("option",{value:"volvo",children:"Volvo"}),Object(g.jsx)("option",{value:"saab",children:"Saab"}),Object(g.jsx)("option",{value:"opel",children:"Opel"}),Object(g.jsx)("option",{value:"audi",children:"Audi"})]}),Object(g.jsxs)("ul",{children:[this.state.attendants.map((function(e){return Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",id:e.id,onChange:t._handleCheckbox,checked:!0},e.id),e.name]})})),this.state.attendants_search.map((function(e){return Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",id:e.id,onChange:t._handleCheckbox,onClick:t._handleClickCheckBox},e.id),e.name]})}))]})]}),Object(g.jsx)("button",{children:"Create Event"})]})]})}}]),n}(a.Component),W=function(t){var e=Object(p.f)().id;return Object(a.createElement)(H,Object(c.a)(Object(c.a)({restaurant_id:parseInt(e),user:t.user},t),{},{key:e}))};var z=function(t){return t.isSaved?Object(g.jsx)("button",{onClick:function(){t.history.push("/restaurant/".concat(t.restaurant.id,"/create-event"))},children:"Create Event!"}):Object(g.jsx)("button",{onClick:function(){!function(t,e,n){console.log("AddToWishList()"),console.log(t);var a={name:t.name,longitude:t.lng,latitude:t.lat,address:t.formatted_address,price_level:t.price_level,rating:t.rating,website:t.website,user_id:e,place_id:t.place_id};j.a.post(R,a).then((function(t){n(t.data.id)}))}(t.restaurant,t.user.id,(function(e){console.log(e),t.history.push("/restaurant/".concat(e,"/create-event"))}))},children:"Add to list and create Event"})},G=n(21),Y=m.SERVER_URL,Q=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={image:""},a.fetchImage=a.fetchImage.bind(Object(I.a)(a)),a}return Object(d.a)(n,[{key:"fetchImage",value:function(t){var e=this;console.log("reference",t);var n=function(t){return[Y,"/fetchimage/",t].join("")};console.log("AXIOS GET",n(t)),j.a.get(n(t)).then((function(t){e.setState({image:t.data})}))}},{key:"componentDidMount",value:function(){this.fetchImage(this.props.photoreference)}},{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsx)("img",{src:this.state.image,alt:""})})}}]),n}(a.Component),J=m.SERVER_URL+"/restaurants.json",K=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={restaurant:t.restaurant,isSaved:!1},a.getAllRestaurants=a.getAllRestaurants.bind(Object(I.a)(a)),a.isRestaurantSaved=a.isRestaurantSaved.bind(Object(I.a)(a)),a}return Object(d.a)(n,[{key:"getAllRestaurants",value:function(t){var e=this;j.a.get(J).then((function(n){var a=n.data.filter((function(t){return t.user_id&&t.user_id===e.props.user.id}));t(a)}))}},{key:"isRestaurantSaved",value:function(){var t=this;this.getAllRestaurants((function(e){if(0!==t.props.restaurants.length){var n=e.find((function(e){return e.place_id===t.props.restaurant.place_id}));n?t.setState({isSaved:!0,restaurant:n}):t.setState({isSaved:!1})}}))}},{key:"componentDidMount",value:function(){this.isRestaurantSaved(),console.log("BEFORE SETSTATE",this.props.restaurant),this.setState({restaurant:this.props.restaurant})}},{key:"componentDidUpdate",value:function(t){this.props.restaurant!==t.restaurant&&this.isRestaurantSaved()}},{key:"addToWishList",value:function(t,e,n){var a=this,s={name:t.name,longitude:t.lng,latitude:t.lat,address:t.formatted_address,price_level:t.price_level,rating:t.rating,website:t.website,user_id:e,place_id:t.place_id};j.a.post(J,s).then((function(t){n(t.data.id),a.isRestaurantSaved()}))}},{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{children:[0!==Object.keys(this.props.restaurant).length&&Object(g.jsxs)(G.a,{children:[Object(g.jsxs)(G.a.Body,{children:[this.props.restaurant.name&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:this.props.restaurant.name}),this.state.isSaved?Object(g.jsx)("button",{disabled:!0,children:"SAVED!"}):Object(g.jsx)("button",{onClick:function(){return t.addToWishList(t.props.restaurant,t.props.user.id,(function(){t.setState({isSaved:!0})}))},children:"Add to your Wishlist"}),Object(g.jsx)(z,Object(c.a)(Object(c.a)({},this.props),this.state))]}),Object(g.jsx)("p",{children:this.props.restaurant.formatted_address}),this.props.restaurant.rating&&Object(g.jsxs)("p",{children:["Rating: ",this.props.restaurant.rating]}),this.props.restaurant.user_ratings_total&&Object(g.jsxs)("p",{children:["Total user rating: ",this.props.restaurant.user_ratings_total]})]}),this.props.restaurant&&this.props.restaurant.photos&&Object(g.jsx)(Q,{photoreference:this.props.restaurant.place_id})]}),!this.props.restaurant&&this.props.searchButtonClicked&&Object(g.jsx)("h3",{children:"...No such thing on Earth, dude!"})]})}}]),n}(a.Component),X={display:"flex",justifyContent:"center",margin:"5px"},Z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).state={query:"",isQueryChanged:!1},t._handleInput=t._handleInput.bind(Object(I.a)(t)),t._handleSubmit=t._handleSubmit.bind(Object(I.a)(t)),t.clearInput=t.clearInput.bind(Object(I.a)(t)),t}return Object(d.a)(n,[{key:"_handleInput",value:function(t){this.setState({query:t.target.value,isQueryChanged:!0})}},{key:"_handleSubmit",value:function(t){t.preventDefault(),this.setState({isQueryChanged:!1}),!0===this.state.isQueryChanged?this.props.onSubmit(this.state.query):this.props.fetchRandomNum()}},{key:"clearInput",value:function(){this.setState({query:""})}},{key:"componentDidUpdate",value:function(t){console.log("My component was just updated"),console.log(this.props.random),this.props.random&&this.props.random!==t.random&&(console.log("SETSTATE"),this.setState({query:""}))}},{key:"render",value:function(){return Object(g.jsxs)("form",{onSubmit:this._handleSubmit,style:X,children:[Object(g.jsx)("input",{onInput:this._handleInput,value:this.state.query,placeholder:"Anything, really",style:{fontSize:"2em"}}),Object(g.jsxs)("button",{style:{backgroundColor:"#2A8093",fontSize:"2em"},children:["Hmm...",this.state.query,"?"]})]})}}]),n}(a.Component),$=m.SERVER_URL,tt={display:"flex",justifyContent:"center",margin:"20px"},et=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={restaurants:[],randomNum:0,searchButtonClicked:!1,random:!0,restaurant:{}},a.fetchRestaurants=a.fetchRestaurants.bind(Object(I.a)(a)),a.fetchRandomNum=a.fetchRandomNum.bind(Object(I.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(I.a)(a)),a}return Object(d.a)(n,[{key:"generateURL",value:function(t){return[$,"/search/",t].join("")}},{key:"fetchRestaurants",value:function(t){var e=this;console.log("ABOUT TO FETCH"),j.a.get(this.generateURL(t)).then((function(t){console.log(t.data),e.setState({restaurants:t.data,searchButtonClicked:!0,isIncluded:!0,random:!1,restaurant:t.data[e.state.randomNum]})}))}},{key:"fetchRandomNum",value:function(){console.log("fetchRandomNum()");var t=Math.floor(Math.random()*this.state.restaurants.length);this.setState({randomNum:t})}},{key:"_handleSubmit",value:function(){var t=["cake","steak","cookies","ice cream","thai food","good pizza","vietnamese","korean","bbq"],e=t[Math.floor(Math.random()*t.length)];console.log(e),this.fetchRestaurants(e)}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:tt,children:Object(g.jsx)(Z,Object(c.a)(Object(c.a)(Object(c.a)({},this.props),this.state),{},{onSubmit:this.fetchRestaurants,fetchRandomNum:this.fetchRandomNum}))}),Object(g.jsx)("div",{children:Object(g.jsx)("h3",{style:tt,children:"or"})}),Object(g.jsx)("div",{style:tt,children:Object(g.jsx)("button",{onClick:this._handleSubmit,style:{backgroundColor:"#E85551",fontSize:"2em"},children:"Adventurous!"})}),Object(g.jsx)(K,Object(c.a)(Object(c.a)(Object(c.a)({},this.props),this.state),{},{restaurant:this.state.restaurant}))]})}}]),n}(a.Component);var nt=function(t){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:" I feel like"}),Object(g.jsx)("h2",{children:m.REACT_APP_SERVER_URL}),Object(g.jsx)(et,Object(c.a)({},t))]})},at=n(41),st=n(42),rt=n(43),it={SERVER_URL:"https://agile-tor-91190.herokuapp.com"},ct={display:"flex",justifyContent:"center",margin:"5px"},ot=it.SERVER_URL,dt=ot+"/restaurants.json";function ut(t){function e(e){var n,a=(n=t.restaurant.id,ot+"/restaurants/".concat(n,".json"));console.log("RESTAURANT_URL",a),j.a.delete(a,{id:t.restaurant.id}).then((function(t){e(t)}))}return Object(g.jsx)("button",{onClick:function(){e((function(){t.updateList()}))},children:"Remove from list"})}var lt=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={restaurantList:[]},a.updateList=a.updateList.bind(Object(I.a)(a)),console.log(it.SERVER_URL),a}return Object(d.a)(n,[{key:"updateList",value:function(){var t=this;console.log("updateList"),j.a.get(dt).then((function(e){console.log(e.data),console.log(t.props.user.id);var n=e.data.filter((function(e){return e.user_id===t.props.user.id}));t.setState({restaurantList:n})}))}},{key:"componentDidMount",value:function(){this.updateList()}},{key:"render",value:function(){var t=this;return Object(g.jsx)(at.a,{style:ct,children:Object(g.jsx)(st.a,{children:this.state.restaurantList.map((function(e){return Object(g.jsx)(rt.a,{style:{marginTop:"5px"},lg:6,children:Object(g.jsxs)(G.a,{children:[Object(g.jsx)(G.a.Img,{variant:"top",src:""}),Object(g.jsx)(G.a.Body,{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:e.name}),Object(g.jsx)(k,{restaurant:e,style:{margin:"5px"}}),Object(g.jsx)(ut,{updateList:t.updateList,restaurant:e}),Object(g.jsxs)("p",{children:["Address: ",e.address]}),e.website&&Object(g.jsxs)("p",{children:["Website: ",Object(g.jsx)("a",{href:e.website,children:e.website})]}),e.contact&&Object(g.jsxs)("p",{children:["Contact: ",e.contact]}),e.rating&&Object(g.jsxs)("p",{children:["Rating: ",e.rating,"/5"]}),e.price_level&&Object(g.jsxs)("p",{children:["Price level: ",e.price_level,"/5"]}),Object(g.jsx)("img",{src:e.img,alt:""})]})})]})},e.id)}))})})}}]),n}(a.Component),ht=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Your wishlist"}),Object(g.jsx)(lt,Object(c.a)({},this.props))]})}}]),n}(a.Component),jt=n(44),bt=n.n(jt),pt={margin:"5px",padding:"10px"};var Ot=function(t){return Object(g.jsx)(g.Fragment,{children:t.eventList&&t.eventList.map((function(e){return Object(g.jsxs)(G.a,{style:pt,children:[e.title&&Object(g.jsx)("h4",{children:e.title}),e.restaurant&&Object(g.jsxs)("h6",{children:["Venue: ",Object(g.jsx)("strong",{children:e.restaurant.name})]}),e.introduction&&Object(g.jsxs)("p",{children:["Introduction: ",e.introduction]}),e.date&&Object(g.jsxs)("p",{children:["Date: ",e.date]}),e.attendants&&0!==e.attendants.length&&Object(g.jsx)("h4",{children:"Attendants"}),e.attendants&&e.attendants.map((function(t){return Object(g.jsxs)("p",{children:[t.user.name," (",t.user.email,")"]},t.user.id)})),Object(g.jsxs)("h4",{children:["Created by ",e.user.name]}),!0!==t.expired&&Object(g.jsx)(b.b,{to:"/event/".concat(e.id),children:Object(g.jsx)("button",{children:"Show event"})})]},e.id)}))})},vt=m.SERVER_URL,gt=vt+"/events.json",ft=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={eventList:[],attendingEvents:[],expiredEvents:[]},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this;j.a.get(gt).then((function(e){var n=e.data.filter((function(e){return e.user&&e.user.id===t.props.user.id}));t.setState({eventList:n})})),j.a.get(vt+"/attendants.json").then((function(e){console.log("GET ATTENDINGEVENT",e);var n=e.data.filter((function(e){return e.user&&e.user.id===t.props.user.id}));0!==n.length&&n.map((function(e){console.log("EVENT INFO",e),e.event&&j.a.get(vt+"/events/".concat(e.event.id,".json")).then((function(e){bt()().isBefore(e.data.event.date)&&e.data.event.user.id!==t.props.user.id?t.setState({attendingEvents:[].concat(Object(F.a)(t.state.attendingEvents),[e.data.event])}):t.setState({expiredEvents:[].concat(Object(F.a)(t.state.expiredEvents),[e.data.event])})}))}))}))}},{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Your Events"}),0!==this.state.eventList.length&&Object(g.jsx)("h3",{children:"--- Current events you are hosting ---"}),Object(g.jsx)(Ot,Object(c.a)(Object(c.a)({},this.props),{},{eventList:this.state.eventList})),0!==this.state.attendingEvents.length&&Object(g.jsx)("h3",{children:"--- Current events you are attending ---"}),Object(g.jsx)(Ot,Object(c.a)(Object(c.a)({},this.props),{},{eventList:this.state.attendingEvents})),0!==this.state.expiredEvents.length&&Object(g.jsx)("h3",{children:"--- Historic events ---"}),Object(g.jsx)(Ot,Object(c.a)(Object(c.a)({},this.props),{},{eventList:this.state.expiredEvents,expired:!0}))]})}}]),n}(a.Component),xt=n(45),mt=n.p+"static/media/food-pattern.d32b9b70.jpg";n.p;var _t={backgroundSize:"100vh",backgroundRepeat:"repeat",backgroundImage:"url(".concat(mt,")")},St=m.SERVER_URL;function yt(t){return function(t){console.log("clicked"),j.a.delete(St+"/logout",{withCredentials:!0}).then((function(e){t.handleLogout(),t.history.push("/")})).catch((function(t){return console.log(t)}))}(t),Object(g.jsx)("p",{children:"Logging out.."})}var Ct=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).loginStatus=function(){j.a.get(St+"/logged_in",{withCredentials:!0}).then((function(t){console.log("logged in?",t),t.data.logged_in&&!1===a.state.isLoggedIn?(console.log("HANDLELOGIN;"),a.handleLogin(t.data.user)):t.data.logged_in||!0!==a.state.isLoggedIn||(console.log("handleLogout()"),a.handleLogout())})).catch((function(t){return console.log("api errors:",t)}))},a.handleLogin=function(t){console.log("Origin handleLogin()"),a.setState({isLoggedIn:!0,user:t})},a.handleLogout=function(){console.log("Origin handleLogout()"),a.setState({isLoggedIn:!1,user:{}})},a.state={isLoggedIn:!1,user:{}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{style:_t,children:[Object(g.jsx)(xt.a,{style:{backgroundColor:"#F7BA89",minHeight:"100vh",position:"relative"},children:Object(g.jsxs)(b.a,{children:[Object(g.jsx)(f,Object(c.a)(Object(c.a)({},this.state),{},{isLoggedIn:this.state.isLoggedIn})),Object(g.jsxs)(p.c,{children:[Object(g.jsx)(p.a,{exact:!0,path:"/",component:function(e){return Object(g.jsx)(nt,Object(c.a)(Object(c.a)(Object(c.a)({},e),t.state),{},{isLoggedIn:t.state.isLoggedIn}))}}),Object(g.jsx)(p.a,{exact:!0,path:"/login",component:function(e){return Object(g.jsx)(S,Object(c.a)(Object(c.a)({},e),{},{handleLogin:t.handleLogin}))}}),Object(g.jsx)(p.a,{exact:!0,path:"/signup",component:function(e){return Object(g.jsx)(C,Object(c.a)(Object(c.a)({},e),{},{handleLogin:t.handleLogin}))}}),Object(g.jsx)(p.a,{exact:!0,path:"/logout",component:function(e){return Object(g.jsx)(yt,Object(c.a)(Object(c.a)({},e),{},{onClick:t.handleClick,handleLogout:t.handleLogout}))}}),Object(g.jsx)(p.a,{exact:!0,path:"/event/:id",component:function(e){return Object(g.jsx)(M,Object(c.a)(Object(c.a)({},e),t.state))}}),Object(g.jsx)(p.a,{exact:!0,path:"/restaurant/:id",component:L}),Object(g.jsx)(p.a,{exact:!0,path:"/wishlist",component:function(e){return Object(g.jsx)(ht,Object(c.a)(Object(c.a)({},e),t.state))}}),Object(g.jsx)(p.a,{exact:!0,path:"/events",component:function(e){return Object(g.jsx)(ft,Object(c.a)(Object(c.a)({},e),t.state))}}),Object(g.jsx)(p.a,{exact:!0,path:"/restaurant/:id/create-event",component:function(e){return Object(g.jsx)(W,Object(c.a)(Object(c.a)({},e),t.state))}})]})]})}),Object(g.jsx)(O.a,{className:"align-right",bg:"dark",variant:"dark",children:Object(g.jsx)(O.a.Brand,{children:"Proudly brought to you by KNYM"})})]})}}]),n}(a.Component),Rt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,90)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),s(t),r(t),i(t)}))};n(80),n(81);i.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(Ct,{})}),document.getElementById("root")),Rt()}},[[85,1,2]]]);
//# sourceMappingURL=main.9798acee.chunk.js.map